<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Daegon Awards</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
:root {
  --gold: #c9a44c;
  --gold-dark: #b89440;
  --black: #000000;
  --dark: #1a1a1a;
  --gray: #666666;
  --light-gray: #f5f5f5;
  --white: #ffffff;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  background-color: var(--white);
  color: var(--dark);
  line-height: 1.6;
}

/* Header Styles */
header {
  background-color: var(--white);
  box-shadow: 0 2px 20px rgba(0, 0, 0, 0.08);
  position: sticky;
  top: 0;
  z-index: 1000;
  border-bottom: 3px solid var(--gold);
}

.header-container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.logo {
  display: flex;
  align-items: center;
  gap: 15px;
}

.logo-icon {
  color: var(--gold);
  font-size: 32px;
}

.logo h1 {
  font-family: 'Times New Roman', serif;
  font-size: 32px;
  letter-spacing: 3px;
  color: var(--black);
  margin: 0;
}

nav ul {
  display: flex;
  list-style: none;
  gap: 25px;
}

nav a {
  text-decoration: none;
  color: var(--black);
  font-weight: 600;
  font-size: 16px;
  transition: color 0.3s;
  position: relative;
  padding: 5px 0;
}

nav a:hover {
  color: var(--gold);
}

nav a.active {
  color: var(--gold);
}

nav a.active::after {
  content: '';
  position: absolute;
  bottom: -2px;
  left: 0;
  width: 100%;
  height: 2px;
  background-color: var(--gold);
}

/* Main Container */
.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 40px 20px;
  min-height: calc(100vh - 200px);
}

.hidden {
  display: none !important;
}

/* Home Page */
.home-header {
  text-align: center;
  margin-bottom: 50px;
}

.home-header h2 {
  font-size: 36px;
  margin-bottom: 15px;
  color: var(--black);
  font-family: 'Times New Roman', serif;
}

.home-header p {
  font-size: 18px;
  color: var(--gray);
  max-width: 700px;
  margin: 0 auto;
}

.editions-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
  gap: 20px;
  margin-top: 40px;
}

.edition-card {
  background-color: var(--white);
  border: 2px solid var(--gold);
  border-radius: 12px;
  padding: 30px 20px;
  text-align: center;
  cursor: pointer;
  transition: all 0.3s ease;
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
  position: relative;
  overflow: hidden;
}

.edition-card:hover {
  transform: translateY(-8px);
  box-shadow: 0 15px 30px rgba(201, 164, 76, 0.15);
  background-color: var(--gold);
  color: var(--white);
}

.edition-card:hover .edition-year {
  color: var(--white);
}

.edition-year {
  font-size: 36px;
  font-weight: 700;
  color: var(--gold);
  margin-bottom: 5px;
  font-family: 'Times New Roman', serif;
  transition: color 0.3s;
}

.edition-label {
  font-size: 14px;
  font-weight: 600;
  letter-spacing: 2px;
  opacity: 0.8;
}

/* Edition Page */
.edition-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 40px;
  padding-bottom: 20px;
  border-bottom: 2px solid var(--gold);
}

.edition-header h2 {
  font-size: 36px;
  color: var(--black);
  font-family: 'Times New Roman', serif;
}

.back-button {
  background-color: var(--gold);
  color: var(--white);
  border: none;
  padding: 12px 25px;
  border-radius: 6px;
  cursor: pointer;
  font-weight: 600;
  font-size: 16px;
  display: flex;
  align-items: center;
  gap: 8px;
  transition: background-color 0.3s;
}

.back-button:hover {
  background-color: var(--gold-dark);
}

/* Categories */
.category-container {
  margin-bottom: 50px;
  background-color: var(--white);
  border-radius: 10px;
  overflow: hidden;
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
}

.category-header {
  background-color: var(--gold);
  color: var(--white);
  padding: 20px;
  cursor: pointer;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.category-header:hover {
  background-color: var(--gold-dark);
}

.category-header h3 {
  font-size: 24px;
  font-family: 'Times New Roman', serif;
  margin: 0;
}

.category-toggle {
  font-size: 20px;
}

.nominees-list {
  padding: 20px;
}

.nominee-item {
  display: flex;
  align-items: center;
  padding: 15px;
  border-bottom: 1px solid var(--light-gray);
  transition: background-color 0.2s;
}

.nominee-item:last-child {
  border-bottom: none;
}

.nominee-item:hover {
  background-color: rgba(201, 164, 76, 0.05);
}

.winner {
  background-color: rgba(201, 164, 76, 0.1);
  border-left: 4px solid var(--gold);
}

.nominee-image {
  width: 60px;
  height: 60px;
  border-radius: 50%;
  object-fit: cover;
  border: 2px solid var(--gold);
  margin-right: 20px;
  flex-shrink: 0;
}

.nominee-info {
  flex-grow: 1;
}

.nominee-name {
  font-weight: 600;
  font-size: 18px;
  margin-bottom: 5px;
  color: var(--black);
}

.nominee-work {
  color: var(--gray);
  font-size: 16px;
  margin-bottom: 5px;
}

.nominee-feature {
  color: var(--gray);
  font-size: 14px;
  font-style: italic;
}

.nominee-feature a {
  color: var(--gold);
  text-decoration: none;
}

.nominee-feature a:hover {
  text-decoration: underline;
}

.nominee-status {
  margin-left: 15px;
}

.status-badge {
  padding: 6px 15px;
  border-radius: 20px;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
}

.winner-badge {
  background-color: var(--gold);
  color: var(--white);
}

.nominated-badge {
  background-color: var(--light-gray);
  color: var(--gray);
}

/* Artist Page */
.artist-header {
  display: flex;
  align-items: center;
  gap: 30px;
  margin-bottom: 40px;
  padding-bottom: 30px;
  border-bottom: 2px solid var(--gold);
}

.artist-image {
  width: 150px;
  height: 150px;
  border-radius: 50%;
  object-fit: cover;
  border: 4px solid var(--gold);
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
}

.artist-details h2 {
  font-size: 36px;
  margin-bottom: 10px;
  color: var(--black);
  font-family: 'Times New Roman', serif;
}

.artist-stats {
  display: flex;
  gap: 20px;
  margin-top: 15px;
}

.stat-item {
  display: flex;
  align-items: center;
  gap: 8px;
  font-weight: 600;
  color: var(--gray);
}

.stat-item i {
  color: var(--gold);
}

.awards-section {
  margin-bottom: 40px;
}

.section-title {
  font-size: 24px;
  margin-bottom: 20px;
  color: var(--black);
  font-family: 'Times New Roman', serif;
  display: flex;
  align-items: center;
  gap: 10px;
}

.section-title i {
  color: var(--gold);
}

.award-list {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
  gap: 20px;
}

.award-card {
  background-color: var(--white);
  border-radius: 8px;
  padding: 20px;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
  border-left: 4px solid var(--gold);
  transition: transform 0.2s;
}

.award-card:hover {
  transform: translateY(-3px);
}

.award-year {
  font-weight: 700;
  color: var(--gold);
  font-size: 18px;
  margin-bottom: 8px;
}

.award-category {
  font-weight: 600;
  font-size: 16px;
  margin-bottom: 5px;
  color: var(--black);
}

.award-work {
  color: var(--gray);
  font-size: 14px;
  margin-bottom: 8px;
}

.award-status {
  display: inline-block;
  padding: 4px 12px;
  border-radius: 15px;
  font-size: 12px;
  font-weight: 600;
}

/* Category Page */
.category-stats {
  display: flex;
  gap: 20px;
  margin-bottom: 30px;
  padding: 20px;
  background-color: var(--light-gray);
  border-radius: 8px;
}

.category-stat {
  text-align: center;
}

.category-stat-value {
  font-size: 24px;
  font-weight: 700;
  color: var(--gold);
}

.category-stat-label {
  font-size: 14px;
  color: var(--gray);
}

/* Loading State */
.loading-container {
  text-align: center;
  padding: 60px 20px;
}

.loading-spinner {
  border: 4px solid rgba(201, 164, 76, 0.2);
  border-radius: 50%;
  border-top: 4px solid var(--gold);
  width: 60px;
  height: 60px;
  animation: spin 1s linear infinite;
  margin: 0 auto 20px;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

.loading-text {
  font-size: 18px;
  color: var(--gray);
}

/* Error State */
.error-container {
  text-align: center;
  padding: 60px 20px;
  background-color: #fff5f5;
  border-radius: 10px;
  border: 1px solid #fed7d7;
}

.error-icon {
  font-size: 48px;
  color: #e53e3e;
  margin-bottom: 20px;
}

.error-text {
  font-size: 18px;
  color: #c53030;
  margin-bottom: 20px;
}

.retry-button {
  background-color: #e53e3e;
  color: white;
  border: none;
  padding: 12px 25px;
  border-radius: 6px;
  cursor: pointer;
  font-weight: 600;
  font-size: 16px;
  display: inline-flex;
  align-items: center;
  gap: 8px;
}

/* Empty State */
.empty-state {
  text-align: center;
  padding: 40px 20px;
  color: var(--gray);
  font-size: 18px;
}

/* Footer */
footer {
  background-color: var(--dark);
  color: var(--white);
  padding: 30px 20px;
  text-align: center;
  margin-top: 60px;
}

.footer-content {
  max-width: 1200px;
  margin: 0 auto;
}

.footer-links {
  display: flex;
  justify-content: center;
  gap: 20px;
  margin: 20px 0;
}

.footer-links a {
  color: var(--gold);
  text-decoration: none;
  transition: color 0.3s;
}

.footer-links a:hover {
  color: var(--white);
}

.copyright {
  color: #999;
  font-size: 14px;
  margin-top: 20px;
}

/* Responsive */
@media (max-width: 768px) {
  .header-container {
    flex-direction: column;
    gap: 20px;
  }
  
  nav ul {
    gap: 15px;
  }
  
  .edition-header {
    flex-direction: column;
    gap: 20px;
    align-items: flex-start;
  }
  
  .artist-header {
    flex-direction: column;
    text-align: center;
    gap: 20px;
  }
  
  .artist-stats {
    justify-content: center;
  }
  
  .award-list {
    grid-template-columns: 1fr;
  }
  
  .nominee-item {
    flex-direction: column;
    align-items: flex-start;
    gap: 15px;
  }
  
  .nominee-image {
    margin-right: 0;
  }
  
  .nominee-status {
    margin-left: 0;
    align-self: flex-end;
  }
  
  .category-stats {
    flex-wrap: wrap;
  }
}
</style>
</head>
<body>
<header>
  <div class="header-container">
    <div class="logo">
      <i class="fas fa-trophy logo-icon"></i>
      <h1>DAEGON AWARDS</h1>
    </div>
    <nav>
      <ul>
        <li><a href="#" id="homeLink" class="active">Home</a></li>
        <li><a href="#" id="browseCategories">Categories</a></li>
        <li><a href="#" id="aboutLink">About</a></li>
      </ul>
    </nav>
  </div>
</header>

<main>
  <!-- Home Section -->
  <section id="home" class="container">
    <div class="home-header">
      <h2>Daegon Music Awards</h2>
      <p>Celebrating excellence in music across multiple genres and categories. Explore past editions, winners, and nominees.</p>
    </div>
    
    <div class="editions-grid" id="editionsGrid">
      <!-- Edition cards will be populated by JavaScript -->
    </div>
  </section>

  <!-- Edition Section -->
  <section id="edition" class="container hidden">
    <div class="edition-header">
      <h2 id="editionTitle">Daegon Awards</h2>
      <button class="back-button" id="backButton">
        <i class="fas fa-arrow-left"></i> Back to Home
      </button>
    </div>
    
    <div id="editionContent">
      <div class="loading-container">
        <div class="loading-spinner"></div>
        <div class="loading-text">Loading award data...</div>
      </div>
    </div>
  </section>

  <!-- Category Section -->
  <section id="category" class="container hidden">
    <div class="edition-header">
      <h2 id="categoryTitle">Category</h2>
      <button class="back-button" id="backButtonCategory">
        <i class="fas fa-arrow-left"></i> Back
      </button>
    </div>
    
    <div id="categoryContent">
      <div class="loading-container">
        <div class="loading-spinner"></div>
        <div class="loading-text">Loading category data...</div>
      </div>
    </div>
  </section>

  <!-- Categories Browse Section -->
  <section id="categoriesBrowse" class="container hidden">
    <div class="edition-header">
      <h2>All Categories</h2>
      <button class="back-button" id="backButtonCategories">
        <i class="fas fa-arrow-left"></i> Back to Home
      </button>
    </div>
    
    <div id="categoriesContent">
      <div class="loading-container">
        <div class="loading-spinner"></div>
        <div class="loading-text">Loading categories...</div>
      </div>
    </div>
  </section>

  <!-- Artist Section -->
  <section id="artist" class="container hidden">
    <div class="edition-header">
      <h2 id="artistTitle">Artist Profile</h2>
      <button class="back-button" id="backButtonArtist">
        <i class="fas fa-arrow-left"></i> Back
      </button>
    </div>
    
    <div id="artistContent">
      <div class="loading-container">
        <div class="loading-spinner"></div>
        <div class="loading-text">Loading artist data...</div>
      </div>
    </div>
  </section>

  <!-- About Section -->
  <section id="about" class="container hidden">
    <div class="edition-header">
      <h2>About Daegon Awards</h2>
      <button class="back-button" id="backButtonAbout">
        <i class="fas fa-arrow-left"></i> Back to Home
      </button>
    </div>
    
    <div style="max-width: 800px; margin: 0 auto;">
      <div style="margin-bottom: 40px;">
        <h3 style="font-size: 24px; margin-bottom: 15px; color: var(--black);">Our Mission</h3>
        <p style="font-size: 16px; line-height: 1.7; color: var(--gray);">
          The Daegon Awards were established to recognize and celebrate exceptional talent in the music industry. 
          Our goal is to honor artists, producers, and contributors who have made significant impacts through their creative work.
        </p>
      </div>
      
      <div style="margin-bottom: 40px;">
        <h3 style="font-size: 24px; margin-bottom: 15px; color: var(--black);">Selection Process</h3>
        <p style="font-size: 16px; line-height: 1.7; color: var(--gray);">
          Nominees are selected by a panel of industry experts, and winners are chosen based on artistic merit, 
          innovation, and cultural impact. The process is designed to be fair, transparent, and comprehensive.
        </p>
      </div>
      
      <div>
        <h3 style="font-size: 24px; margin-bottom: 15px; color: var(--black);">Data Source</h3>
        <p style="font-size: 16px; line-height: 1.7; color: var(--gray); margin-bottom: 20px;">
          All award data is sourced from publicly available Google Sheets that document the nominations and winners 
          for each edition of the Daegon Awards from 2017 to 2025.
        </p>
        <a href="https://docs.google.com/spreadsheets/d/1DNb6uYi6K231-fhrSt3XPlaag8eG9ZFVHhvSXyjWCuk" 
           target="_blank" 
           style="display: inline-flex; align-items: center; gap: 10px; background-color: var(--gold); color: white; padding: 12px 24px; border-radius: 6px; text-decoration: none; font-weight: 600;">
          <i class="fas fa-external-link-alt"></i> View Data Source
        </a>
      </div>
    </div>
  </section>
</main>

<footer>
  <div class="footer-content">
    <div class="logo" style="justify-content: center;">
      <i class="fas fa-trophy logo-icon"></i>
      <h1 style="color: white;">DAEGON AWARDS</h1>
    </div>
    
    <div class="footer-links">
      <a href="#" id="footerHome">Home</a>
      <a href="#" id="footerCategories">Categories</a>
      <a href="#" id="footerAbout">About</a>
      <a href="https://docs.google.com/spreadsheets/d/1DNb6uYi6K231-fhrSt3XPlaag8eG9ZFVHhvSXyjWCuk" target="_blank">Data Source</a>
    </div>
    
    <div class="copyright">
      © 2023 Daegon Awards. All data is for demonstration purposes.
    </div>
  </div>
</footer>

<script>
// ================= CONSTANTS AND DATA =================
const EDITIONS = {
  2017: {
    sheetId: "1DNb6uYi6K231-fhrSt3XPlaag8eG9ZFVHhvSXyjWCuk",
    gid: "0",
    name: "2017 Edition"
  },
  2018: {
    sheetId: "1DNb6uYi6K231-fhrSt3XPlaag8eG9ZFVHhvSXyjWCuk",
    gid: "912023648",
    name: "2018 Edition"
  },
  2019: {
    sheetId: "1DNb6uYi6K231-fhrSt3XPlaag8eG9ZFVHhvSXyjWCuk",
    gid: "221365296",
    name: "2019 Edition"
  },
  2020: {
    sheetId: "1DNb6uYi6K231-fhrSt3XPlaag8eG9ZFVHhvSXyjWCuk",
    gid: "1975111491",
    name: "2020 Edition"
  },
  2021: {
    sheetId: "1DNb6uYi6K231-fhrSt3XPlaag8eG9ZFVHhvSXyjWCuk",
    gid: "919977085",
    name: "2021 Edition"
  },
  2022: {
    sheetId: "1DNb6uYi6K231-fhrSt3XPlaag8eG9ZFVHhvSXyjWCuk",
    gid: "2065423547",
    name: "2022 Edition"
  },
  2023: {
    sheetId: "1DNb6uYi6K231-fhrSt3XPlaag8eG9ZFVHhvSXyjWCuk",
    gid: "1803569858",
    name: "2023 Edition"
  },
  2024: {
    sheetId: "1DNb6uYi6K231-fhrSt3XPlaag8eG9ZFVHhvSXyjWCuk",
    gid: "1350904783",
    name: "2024 Edition"
  },
  2025: {
    sheetId: "1DNb6uYi6K231-fhrSt3XPlaag8eG9ZFVHhvSXyjWCuk",
    gid: "1189047483",
    name: "2025 Edition"
  }
};

const NO_FEAT_CATEGORIES = ["Artist of the Year", "Best New Artist"];

// Artist image cache
const artistImageCache = {};

// Data cache
const dataCache = {};

// ================= DOM ELEMENTS =================
const homeSection = document.getElementById('home');
const editionSection = document.getElementById('edition');
const categorySection = document.getElementById('category');
const categoriesBrowseSection = document.getElementById('categoriesBrowse');
const artistSection = document.getElementById('artist');
const aboutSection = document.getElementById('about');
const editionContent = document.getElementById('editionContent');
const categoryContent = document.getElementById('categoryContent');
const categoriesContent = document.getElementById('categoriesContent');
const artistContent = document.getElementById('artistContent');
const editionTitle = document.getElementById('editionTitle');
const categoryTitle = document.getElementById('categoryTitle');
const artistTitle = document.getElementById('artistTitle');
const editionsGrid = document.getElementById('editionsGrid');

// Navigation links
const homeLink = document.getElementById('homeLink');
const browseCategoriesLink = document.getElementById('browseCategories');
const aboutLink = document.getElementById('aboutLink');
const footerHome = document.getElementById('footerHome');
const footerCategories = document.getElementById('footerCategories');
const footerAbout = document.getElementById('footerAbout');

// Back buttons
const backButton = document.getElementById('backButton');
const backButtonCategory = document.getElementById('backButtonCategory');
const backButtonCategories = document.getElementById('backButtonCategories');
const backButtonArtist = document.getElementById('backButtonArtist');
const backButtonAbout = document.getElementById('backButtonAbout');

// ================= HELPER FUNCTIONS =================
function showSection(section) {
  [homeSection, editionSection, categorySection, categoriesBrowseSection, artistSection, aboutSection].forEach(s => {
    s.classList.add('hidden');
  });
  section.classList.remove('hidden');
  
  // Update active nav link
  document.querySelectorAll('nav a').forEach(link => {
    link.classList.remove('active');
  });
  
  if (section === homeSection) {
    homeLink.classList.add('active');
  } else if (section === categoriesBrowseSection) {
    browseCategoriesLink.classList.add('active');
  } else if (section === aboutSection) {
    aboutLink.classList.add('active');
  }
}

function showHome() {
  showSection(homeSection);
}

function showAbout() {
  showSection(aboutSection);
}

function showCategoriesBrowse() {
  showSection(categoriesBrowseSection);
  loadAllCategories();
}

// Get artist image from a free repository (Unsplash API for music artists)
function getArtistImage(artistName) {
  if (!artistName || artistName.trim() === '') {
    return getPlaceholderImage('?');
  }
  
  // Use cached image if available
  if (artistImageCache[artistName]) {
    return artistImageCache[artistName];
  }
  
  // Generate a deterministic image based on artist name
  // Using Unsplash Source API with music/artist related queries
  const searchTerms = [
    'singer',
    'musician',
    'artist',
    'rapper',
    'band',
    'vocalist',
    'performer'
  ];
  
  // Create a hash from artist name to select a consistent search term
  const hash = artistName.split('').reduce((acc, char) => acc + char.charCodeAt(0), 0);
  const searchTerm = searchTerms[hash % searchTerms.length];
  
  // Generate initials for placeholder
  const words = artistName.split(' ').filter(word => word.length > 0);
  let initials = '';
  
  if (words.length === 1) {
    initials = words[0].substring(0, 2).toUpperCase();
  } else {
    initials = (words[0][0] + words[words.length - 1][0]).toUpperCase();
  }
  
  // Color based on name hash
  const colors = [
    '#c9a44c', '#2c3e50', '#3498db', '#e74c3c', '#2ecc71',
    '#9b59b6', '#1abc9c', '#d35400', '#34495e', '#16a085'
  ];
  
  const color = colors[hash % colors.length];
  
  // Try to get actual artist image from Unsplash
  // Using a fallback approach: first try artist-specific, then generic music image
  const unsplashUrl = `https://source.unsplash.com/featured/150x150/?${encodeURIComponent(searchTerm)},music,concert`;
  
  // Create a test image to check if it loads
  const testImg = new Image();
  testImg.src = unsplashUrl;
  
  // Use the Unsplash image if it loads, otherwise use placeholder
  testImg.onload = function() {
    artistImageCache[artistName] = unsplashUrl;
  };
  
  testImg.onerror = function() {
    // If Unsplash fails, use SVG placeholder
    const svg = `
      <svg xmlns="http://www.w3.org/2000/svg" width="150" height="150" viewBox="0 0 150 150">
        <circle cx="75" cy="75" r="75" fill="${color}"/>
        <text x="75" y="85" text-anchor="middle" fill="white" font-family="Arial, sans-serif" font-size="60" font-weight="bold">
          ${initials}
        </text>
      </svg>`;
    
    artistImageCache[artistName] = 'data:image/svg+xml;charset=UTF-8,' + encodeURIComponent(svg);
  };
  
  // Return a placeholder initially, it will be updated if Unsplash loads
  const svg = `
    <svg xmlns="http://www.w3.org/2000/svg" width="150" height="150" viewBox="0 0 150 150">
      <circle cx="75" cy="75" r="75" fill="${color}"/>
      <text x="75" y="85" text-anchor="middle" fill="white" font-family="Arial, sans-serif" font-size="60" font-weight="bold">
        ${initials}
      </text>
    </svg>`;
  
  const placeholder = 'data:image/svg+xml;charset=UTF-8,' + encodeURIComponent(svg);
  artistImageCache[artistName] = placeholder;
  
  return placeholder;
}

function getPlaceholderImage(text) {
  const svg = `
    <svg xmlns="http://www.w3.org/2000/svg" width="150" height="150" viewBox="0 0 150 150">
      <circle cx="75" cy="75" r="75" fill="#cccccc"/>
      <text x="75" y="85" text-anchor="middle" fill="white" font-family="Arial, sans-serif" font-size="60" font-weight="bold">
        ${text || '?'}
      </text>
    </svg>`;
  
  return 'data:image/svg+xml;charset=UTF-8,' + encodeURIComponent(svg);
}

// Improved Google Sheets fetching with better error handling
async function fetchSheetData(year) {
  // Check cache first
  const cacheKey = `edition-${year}`;
  if (dataCache[cacheKey]) {
    console.log(`Using cached data for ${year}`);
    return dataCache[cacheKey];
  }
  
  const edition = EDITIONS[year];
  if (!edition) {
    throw new Error(`Edition ${year} not found`);
  }
  
  console.log(`Fetching data for ${year} edition...`);
  
  try {
    // Method 1: Direct fetch with CORS
    const url = `https://docs.google.com/spreadsheets/d/${edition.sheetId}/gviz/tq?tqx=out:json&gid=${edition.gid}`;
    
    const response = await fetch(url);
    
    if (!response.ok) {
      throw new Error(`HTTP error! status: ${response.status}`);
    }
    
    const text = await response.text();
    
    // Parse the Google Visualization API response
    // Remove the wrapper and parse JSON
    const jsonStart = text.indexOf('{');
    const jsonEnd = text.lastIndexOf('}') + 1;
    
    if (jsonStart === -1 || jsonEnd === -1) {
      throw new Error('Invalid response format from Google Sheets');
    }
    
    const jsonText = text.substring(jsonStart, jsonEnd);
    const data = JSON.parse(jsonText);
    
    if (!data.table || !data.table.rows) {
      console.warn(`No table data found for ${year}`);
      return { categories: {}, order: [] };
    }
    
    // Process all rows including empty ones to maintain order
    const rows = data.table.rows;
    const categories = {};
    const categoryOrder = [];
    const categorySet = new Set();
    
    // Process all rows to capture every entry
    for (let i = 0; i < rows.length; i++) {
      const row = rows[i];
      const cells = row.c;
      
      if (!cells || cells.length < 1) continue;
      
      const category = cells[0]?.v || '';
      const item = cells[1]?.v || '';
      const artist = cells[2]?.v || '';
      const feature = cells[3]?.v || '';
      const status = cells[4]?.v || '';
      
      // Track category order (as they appear in spreadsheet)
      if (category && !categorySet.has(category)) {
        categorySet.add(category);
        categoryOrder.push(category);
      }
      
      if (!category || category.trim() === '') continue;
      
      if (!categories[category]) {
        categories[category] = [];
      }
      
      // Add entry even if artist is missing (but category exists)
      categories[category].push({
        item: item || artist || '',
        artist: artist || '',
        feature: feature || '',
        status: (status || '').toLowerCase().includes('win') ? 'Winner' : 'Nominated',
        year: year
      });
    }
    
    const result = {
      categories: categories,
      order: categoryOrder
    };
    
    // Cache the data
    dataCache[cacheKey] = result;
    console.log(`Data for ${year} edition loaded successfully. Categories: ${Object.keys(categories).length}, Total entries: ${Object.values(categories).flat().length}`);
    
    return result;
  } catch (error) {
    console.error(`Direct fetch failed for ${year}:`, error);
    
    // Method 2: Try with CORS proxy
    try {
      console.log(`Trying CORS proxy for ${year}...`);
      const proxyUrl = 'https://api.allorigins.win/raw?url=';
      const targetUrl = `https://docs.google.com/spreadsheets/d/${edition.sheetId}/gviz/tq?tqx=out:json&gid=${edition.gid}`;
      
      const proxyResponse = await fetch(proxyUrl + encodeURIComponent(targetUrl));
      
      if (!proxyResponse.ok) {
        throw new Error(`Proxy HTTP error! status: ${proxyResponse.status}`);
      }
      
      const text = await proxyResponse.text();
      
      // Parse the response
      const jsonStart = text.indexOf('{');
      const jsonEnd = text.lastIndexOf('}') + 1;
      
      if (jsonStart === -1 || jsonEnd === -1) {
        throw new Error('Invalid response format from proxy');
      }
      
      const jsonText = text.substring(jsonStart, jsonEnd);
      const data = JSON.parse(jsonText);
      
      if (!data.table || !data.table.rows) {
        console.warn(`No table data found via proxy for ${year}`);
        return { categories: {}, order: [] };
      }
      
      // Process all rows
      const rows = data.table.rows;
      const categories = {};
      const categoryOrder = [];
      const categorySet = new Set();
      
      for (let i = 0; i < rows.length; i++) {
        const row = rows[i];
        const cells = row.c;
        
        if (!cells || cells.length < 1) continue;
        
        const category = cells[0]?.v || '';
        const item = cells[1]?.v || '';
        const artist = cells[2]?.v || '';
        const feature = cells[3]?.v || '';
        const status = cells[4]?.v || '';
        
        if (category && !categorySet.has(category)) {
          categorySet.add(category);
          categoryOrder.push(category);
        }
        
        if (!category || category.trim() === '') continue;
        
        if (!categories[category]) {
          categories[category] = [];
        }
        
        categories[category].push({
          item: item || artist || '',
          artist: artist || '',
          feature: feature || '',
          status: (status || '').toLowerCase().includes('win') ? 'Winner' : 'Nominated',
          year: year
        });
      }
      
      const result = {
        categories: categories,
        order: categoryOrder
      };
      
      // Cache the data
      dataCache[cacheKey] = result;
      console.log(`Data for ${year} edition loaded via proxy. Categories: ${Object.keys(categories).length}`);
      
      return result;
    } catch (proxyError) {
      console.error(`Proxy also failed for ${year}:`, proxyError);
      throw new Error(`Failed to load data for ${year} edition: ${error.message}`);
    }
  }
}

function renderError(message) {
  return `
    <div class="error-container">
      <div class="error-icon">
        <i class="fas fa-exclamation-triangle"></i>
      </div>
      <div class="error-text">${message}</div>
      <button class="retry-button" onclick="window.location.reload()">
        <i class="fas fa-redo"></i> Retry
      </button>
    </div>
  `;
}

function renderLoading() {
  return `
    <div class="loading-container">
      <div class="loading-spinner"></div>
      <div class="loading-text">Loading data...</div>
    </div>
  `;
}

// ================= EDITION PAGE =================
async function openEdition(year) {
  showSection(editionSection);
  editionTitle.textContent = `Daegon Awards ${year}`;
  editionContent.innerHTML = renderLoading();
  
  try {
    const editionData = await fetchSheetData(year);
    const { categories, order } = editionData;
    
    if (!categories || Object.keys(categories).length === 0) {
      editionContent.innerHTML = `
        <div class="empty-state">
          <i class="fas fa-trophy" style="font-size: 48px; color: var(--gold); margin-bottom: 20px;"></i>
          <p>No data available for the ${year} edition.</p>
        </div>
      `;
      return;
    }
    
    let html = '';
    
    // Use the order from spreadsheet or sort alphabetically if order not available
    const sortedCategories = order.length > 0 ? order : Object.keys(categories).sort();
    
    for (const categoryName of sortedCategories) {
      const nominees = categories[categoryName];
      
      if (!nominees || nominees.length === 0) continue;
      
      // Sort: winners first, then alphabetically by artist
      nominees.sort((a, b) => {
        if (a.status === 'Winner' && b.status !== 'Winner') return -1;
        if (a.status !== 'Winner' && b.status === 'Winner') return 1;
        return a.artist.localeCompare(b.artist);
      });
      
      html += `
        <div class="category-container">
          <div class="category-header" onclick="toggleCategory('${year}-${categoryName.replace(/'/g, "\\'")}')">
            <h3>${categoryName}</h3>
            <span class="category-toggle">+</span>
          </div>
          <div class="nominees-list" id="category-${year}-${categoryName.replace(/[^a-zA-Z0-9]/g, '-')}">
      `;
      
      for (const nominee of nominees) {
        const isWinner = nominee.status === 'Winner';
        const showFeature = nominee.feature && nominee.feature.trim() !== '' && !NO_FEAT_CATEGORIES.includes(categoryName);
        
        // Display item if different from artist name
        let displayText = nominee.artist || 'Unknown Artist';
        if (nominee.item && nominee.item.trim() !== '' && nominee.item !== nominee.artist) {
          displayText = `${nominee.item} — ${nominee.artist}`;
        }
        
        // Process featured artists
        let featureHtml = '';
        if (showFeature) {
          const featuredArtists = nominee.feature.split(',').map(f => f.trim()).filter(f => f);
          featureHtml = featuredArtists.map(artist => 
            `<a href="#" onclick="openArtist('${encodeURIComponent(artist)}'); return false;">${artist}</a>`
          ).join(', ');
          featureHtml = `<div class="nominee-feature">feat. ${featureHtml}</div>`;
        }
        
        html += `
          <div class="nominee-item ${isWinner ? 'winner' : ''}">
            <img src="${getArtistImage(nominee.artist)}" alt="${nominee.artist}" class="nominee-image">
            <div class="nominee-info">
              <div class="nominee-name">
                <a href="#" onclick="openArtist('${encodeURIComponent(nominee.artist)}'); return false;">
                  ${displayText}
                </a>
              </div>
              ${featureHtml}
            </div>
            <div class="nominee-status">
              <span class="status-badge ${isWinner ? 'winner-badge' : 'nominated-badge'}">
                ${isWinner ? 'Winner' : 'Nominated'}
              </span>
            </div>
          </div>
        `;
      }
      
      html += `
          </div>
        </div>
      `;
    }
    
    // Add category navigation
    html += `
      <div style="margin-top: 40px; padding: 20px; background-color: var(--light-gray); border-radius: 10px;">
        <h3 style="margin-bottom: 15px; color: var(--black);">Browse by Category</h3>
        <div style="display: flex; flex-wrap: wrap; gap: 10px;">
          ${sortedCategories.map(cat => 
            `<a href="#" onclick="openCategory('${encodeURIComponent(cat)}'); return false;" style="background-color: var(--gold); color: white; padding: 8px 15px; border-radius: 5px; text-decoration: none; font-weight: 600;">${cat}</a>`
          ).join('')}
        </div>
      </div>
    `;
    
    editionContent.innerHTML = html;
  } catch (error) {
    console.error('Error loading edition:', error);
    editionContent.innerHTML = renderError(`Failed to load award data for ${year}. Please check your connection and try again. Error: ${error.message}`);
  }
}

// Toggle category visibility
function toggleCategory(categoryId) {
  const categoryElement = document.getElementById(`category-${categoryId.replace(/[^a-zA-Z0-9]/g, '-')}`);
  const toggleElement = event.currentTarget.querySelector('.category-toggle');
  
  if (categoryElement.style.display === 'none') {
    categoryElement.style.display = 'block';
    toggleElement.textContent = '-';
  } else {
    categoryElement.style.display = 'none';
    toggleElement.textContent = '+';
  }
}

// ================= CATEGORY PAGE =================
async function openCategory(categoryNameEncoded) {
  const categoryName = decodeURIComponent(categoryNameEncoded);
  showSection(categorySection);
  categoryTitle.textContent = categoryName;
  categoryContent.innerHTML = renderLoading();
  
  try {
    // Load data for all years
    const years = Object.keys(EDITIONS).sort((a, b) => parseInt(b) - parseInt(a));
    const categoryData = [];
    let totalWins = 0;
    let totalNominations = 0;
    
    for (const year of years) {
      try {
        const editionData = await fetchSheetData(year);
        const { categories } = editionData;
        
        if (categories && categories[categoryName]) {
          const nominees = categories[categoryName];
          
          nominees.forEach(nominee => {
            const entry = {
              year: year,
              item: nominee.item,
              artist: nominee.artist,
              feature: nominee.feature,
              status: nominee.status
            };
            
            categoryData.push(entry);
            
            if (nominee.status === 'Winner') {
              totalWins++;
            }
            totalNominations++;
          });
        }
      } catch (error) {
        console.error(`Error fetching data for year ${year}:`, error);
      }
    }
    
    if (categoryData.length === 0) {
      categoryContent.innerHTML = `
        <div class="empty-state">
          <i class="fas fa-trophy" style="font-size: 48px; color: var(--gold); margin-bottom: 20px;"></i>
          <p>No data found for category "${categoryName}".</p>
        </div>
      `;
      return;
    }
    
    // Sort by year (newest first) and then by status (winners first)
    categoryData.sort((a, b) => {
      if (parseInt(b.year) !== parseInt(a.year)) {
        return parseInt(b.year) - parseInt(a.year);
      }
      if (a.status === 'Winner' && b.status !== 'Winner') return -1;
      if (a.status !== 'Winner' && b.status === 'Winner') return 1;
      return a.artist.localeCompare(b.artist);
    });
    
    let html = `
      <div class="category-stats">
        <div class="category-stat">
          <div class="category-stat-value">${totalNominations}</div>
          <div class="category-stat-label">Total Nominations</div>
        </div>
        <div class="category-stat">
          <div class="category-stat-value">${totalWins}</div>
          <div class="category-stat-label">Total Wins</div>
        </div>
        <div class="category-stat">
          <div class="category-stat-value">${new Set(categoryData.map(d => d.year)).size}</div>
          <div class="category-stat-label">Editions</div>
        </div>
      </div>
      
      <div class="award-list">
    `;
    
    // Group by year
    const dataByYear = {};
    categoryData.forEach(entry => {
      if (!dataByYear[entry.year]) {
        dataByYear[entry.year] = [];
      }
      dataByYear[entry.year].push(entry);
    });
    
    // Sort years in descending order
    const sortedYears = Object.keys(dataByYear).sort((a, b) => parseInt(b) - parseInt(a));
    
    for (const year of sortedYears) {
      const yearEntries = dataByYear[year];
      
      html += `<h3 style="margin: 30px 0 15px 0; color: var(--gold); font-size: 20px;">${year} Edition</h3>`;
      
      for (const entry of yearEntries) {
        const isWinner = entry.status === 'Winner';
        const showFeature = entry.feature && entry.feature.trim() !== '' && !NO_FEAT_CATEGORIES.includes(categoryName);
        
        let displayItem = entry.artist;
        if (entry.item && entry.item.trim() !== '' && entry.item !== entry.artist) {
          displayItem = `${entry.item} — ${entry.artist}`;
        }
        
        // Process featured artists
        let featureHtml = '';
        if (showFeature) {
          const featuredArtists = entry.feature.split(',').map(f => f.trim()).filter(f => f);
          featureHtml = featuredArtists.map(artist => 
            `<a href="#" onclick="openArtist('${encodeURIComponent(artist)}'); return false;">${artist}</a>`
          ).join(', ');
          featureHtml = `<div style="color: var(--gray); font-size: 14px; margin-top: 5px;">feat. ${featureHtml}</div>`;
        }
        
        html += `
          <div class="award-card">
            <div class="award-year">${year}</div>
            <div class="award-category">${categoryName}</div>
            <div class="award-work">
              <a href="#" onclick="openArtist('${encodeURIComponent(entry.artist)}'); return false;" style="color: var(--black); text-decoration: none; font-weight: 600;">
                ${displayItem}
              </a>
            </div>
            ${featureHtml}
            <div style="margin-top: 10px;">
              <span class="award-status" style="background-color: ${isWinner ? 'var(--gold)' : 'var(--light-gray)'}; color: ${isWinner ? 'white' : 'var(--gray)'};">
                ${isWinner ? 'Winner' : 'Nominated'}
              </span>
            </div>
          </div>
        `;
      }
    }
    
    html += `</div>`;
    
    categoryContent.innerHTML = html;
  } catch (error) {
    console.error('Error loading category:', error);
    categoryContent.innerHTML = renderError(`Failed to load category data for "${categoryName}". Please try again.`);
  }
}

// ================= BROWSE CATEGORIES =================
async function loadAllCategories() {
  categoriesContent.innerHTML = renderLoading();
  
  try {
    // Load all categories from all editions
    const years = Object.keys(EDITIONS);
    const allCategories = new Set();
    const categoryStats = {};
    
    for (const year of years) {
      try {
        const editionData = await fetchSheetData(year);
        const { categories } = editionData;
        
        if (categories) {
          Object.keys(categories).forEach(category => {
            allCategories.add(category);
            
            if (!categoryStats[category]) {
              categoryStats[category] = {
                nominations: 0,
                wins: 0,
                years: new Set()
              };
            }
            
            const nominees = categories[category];
            categoryStats[category].nominations += nominees.length;
            categoryStats[category].wins += nominees.filter(n => n.status === 'Winner').length;
            categoryStats[category].years.add(year);
          });
        }
      } catch (error) {
        console.error(`Error loading categories from ${year}:`, error);
      }
    }
    
    // Convert to array and sort
    const sortedCategories = Array.from(allCategories).sort();
    
    let html = `
      <div style="margin-bottom: 30px;">
        <p style="color: var(--gray);">Browse all award categories across all editions (${sortedCategories.length} total categories).</p>
      </div>
      
      <div class="award-list">
    `;
    
    for (const category of sortedCategories) {
      const stats = categoryStats[category] || { nominations: 0, wins: 0, years: new Set() };
      
      html += `
        <div class="award-card" onclick="openCategory('${encodeURIComponent(category)}')" style="cursor: pointer;">
          <div class="award-category">${category}</div>
          <div style="display: flex; gap: 20px; margin-top: 15px;">
            <div>
              <div style="font-weight: 700; color: var(--gold);">${stats.nominations}</div>
              <div style="font-size: 12px; color: var(--gray);">Nominations</div>
            </div>
            <div>
              <div style="font-weight: 700; color: var(--gold);">${stats.wins}</div>
              <div style="font-size: 12px; color: var(--gray);">Wins</div>
            </div>
            <div>
              <div style="font-weight: 700; color: var(--gold);">${stats.years.size}</div>
              <div style="font-size: 12px; color: var(--gray);">Editions</div>
            </div>
          </div>
          <div style="margin-top: 15px; font-size: 14px; color: var(--gray);">
            Appears in: ${Array.from(stats.years).sort((a, b) => parseInt(b) - parseInt(a)).join(', ')}
          </div>
        </div>
      `;
    }
    
    html += `</div>`;
    
    categoriesContent.innerHTML = html;
  } catch (error) {
    console.error('Error loading all categories:', error);
    categoriesContent.innerHTML = renderError('Failed to load categories. Please try again.');
  }
}

// ================= ARTIST PAGE =================
async function openArtist(encodedName) {
  const artistName = decodeURIComponent(encodedName);
  showSection(artistSection);
  artistTitle.textContent = artistName;
  artistContent.innerHTML = renderLoading();
  
  try {
    // Fetch data for all editions
    const years = Object.keys(EDITIONS).sort((a, b) => parseInt(b) - parseInt(a));
    const allEntries = [];
    
    for (const year of years) {
      try {
        const editionData = await fetchSheetData(year);
        const { categories } = editionData;
        
        if (categories) {
          for (const [categoryName, nominees] of Object.entries(categories)) {
            for (const nominee of nominees) {
              // Check if this artist is the main artist
              const isMainArtist = nominee.artist === artistName;
              
              // Check if this artist is a featured artist
              let isFeaturedArtist = false;
              if (nominee.feature && nominee.feature.trim() !== '') {
                const featuredArtists = nominee.feature.split(',').map(f => f.trim());
                isFeaturedArtist = featuredArtists.includes(artistName);
              }
              
              if (isMainArtist || isFeaturedArtist) {
                const entry = {
                  year: year,
                  category: categoryName,
                  item: nominee.item,
                  status: nominee.status,
                  role: isMainArtist ? 'Main Artist' : 'Featured Artist',
                  feature: nominee.feature
                };
                
                allEntries.push(entry);
              }
            }
          }
        }
      } catch (error) {
        console.error(`Error fetching data for year ${year}:`, error);
      }
    }
    
    if (allEntries.length === 0) {
      artistContent.innerHTML = `
        <div class="empty-state">
          <i class="fas fa-user" style="font-size: 48px; color: var(--gold); margin-bottom: 20px;"></i>
          <p>No nominations found for "${artistName}".</p>
        </div>
      `;
      return;
    }
    
    // Separate wins and nominations
    const wins = allEntries.filter(entry => entry.status === 'Winner');
    const nominations = allEntries;
    
    // Count unique nominations (wins counted once)
    const uniqueNominations = [];
    const seen = new Set();
    
    for (const entry of allEntries) {
      const key = `${entry.year}-${entry.category}-${entry.item}-${entry.role}`;
      if (!seen.has(key)) {
        seen.add(key);
        uniqueNominations.push(entry);
      }
    }
    
    // Render artist profile
    let html = `
      <div class="artist-header">
        <img src="${getArtistImage(artistName)}" alt="${artistName}" class="artist-image">
        <div class="artist-details">
          <h2>${artistName}</h2>
          <div class="artist-stats">
            <div class="stat-item">
              <i class="fas fa-trophy"></i>
              <span>${wins.length} Wins</span>
            </div>
            <div class="stat-item">
              <i class="fas fa-star"></i>
              <span>${uniqueNominations.length} Nominations</span>
            </div>
            <div class="stat-item">
              <i class="fas fa-calendar-alt"></i>
              <span>${new Set(allEntries.map(n => n.year)).size} Editions</span>
            </div>
          </div>
        </div>
      </div>
    `;
    
    // Render wins
    html += `
      <div class="awards-section">
        <div class="section-title">
          <i class="fas fa-trophy"></i>
          <span>Award Wins (${wins.length})</span>
        </div>
    `;
    
    if (wins.length > 0) {
      // Group wins by year
      const winsByYear = {};
      wins.forEach(win => {
        if (!winsByYear[win.year]) {
          winsByYear[win.year] = [];
        }
        winsByYear[win.year].push(win);
      });
      
      // Sort years in descending order
      const sortedYears = Object.keys(winsByYear).sort((a, b) => parseInt(b) - parseInt(a));
      
      html += '<div class="award-list">';
      
      for (const year of sortedYears) {
        winsByYear[year].forEach(win => {
          const displayItem = win.item && win.item !== artistName ? win.item : '';
          
          html += `
            <div class="award-card">
              <div class="award-year">${win.year}</div>
              <div class="award-category">${win.category}</div>
              ${displayItem ? `<div class="award-work">${displayItem}</div>` : ''}
              <div>
                <span class="award-status" style="background-color: var(--gold); color: white;">
                  Winner • ${win.role}
                </span>
              </div>
            </div>
          `;
        });
      }
      
      html += '</div>';
    } else {
      html += `
        <div class="empty-state">
          <p>No wins recorded for ${artistName}.</p>
        </div>
      `;
    }
    
    html += `</div>`;
    
    // Render all nominations
    html += `
      <div class="awards-section">
        <div class="section-title">
          <i class="fas fa-star"></i>
          <span>All Nominations (${uniqueNominations.length})</span>
        </div>
    `;
    
    if (uniqueNominations.length > 0) {
      // Group nominations by year
      const nominationsByYear = {};
      uniqueNominations.forEach(nomination => {
        if (!nominationsByYear[nomination.year]) {
          nominationsByYear[nomination.year] = [];
        }
        nominationsByYear[nomination.year].push(nomination);
      });
      
      // Sort years in descending order
      const sortedYears = Object.keys(nominationsByYear).sort((a, b) => parseInt(b) - parseInt(a));
      
      html += '<div class="award-list">';
      
      for (const year of sortedYears) {
        nominationsByYear[year].forEach(nomination => {
          const displayItem = nomination.item && nomination.item !== artistName ? nomination.item : '';
          const isWin = nomination.status === 'Winner';
          
          html += `
            <div class="award-card">
              <div class="award-year">${nomination.year}</div>
              <div class="award-category">${nomination.category}</div>
              ${displayItem ? `<div class="award-work">${displayItem}</div>` : ''}
              <div>
                <span class="award-status" style="background-color: ${isWin ? 'var(--gold)' : 'var(--light-gray)'}; color: ${isWin ? 'white' : 'var(--gray)'};">
                  ${isWin ? 'Winner' : 'Nominated'} • ${nomination.role}
                </span>
              </div>
            </div>
          `;
        });
      }
      
      html += '</div>';
    }
    
    html += `</div>`;
    
    artistContent.innerHTML = html;
  } catch (error) {
    console.error('Error loading artist data:', error);
    artistContent.innerHTML = renderError('Failed to load artist data. Please try again.');
  }
}

// ================= INITIALIZE EDITION CARDS =================
function initializeEditionCards() {
  const years = Object.keys(EDITIONS).sort((a, b) => parseInt(b) - parseInt(a));
  
  let html = '';
  years.forEach(year => {
    html += `
      <div class="edition-card" data-year="${year}">
        <div class="edition-year">${year}</div>
        <div class="edition-label">EDITION</div>
      </div>
    `;
  });
  
  editionsGrid.innerHTML = html;
  
  // Add event listeners to edition cards
  document.querySelectorAll('.edition-card').forEach(card => {
    card.addEventListener('click', () => {
      const year = card.getAttribute('data-year');
      openEdition(year);
    });
  });
}

// ================= EVENT LISTENERS =================
document.addEventListener('DOMContentLoaded', () => {
  // Initialize edition cards
  initializeEditionCards();
  
  // Navigation
  homeLink.addEventListener('click', (e) => {
    e.preventDefault();
    showHome();
  });
  
  browseCategoriesLink.addEventListener('click', (e) => {
    e.preventDefault();
    showCategoriesBrowse();
  });
  
  aboutLink.addEventListener('click', (e) => {
    e.preventDefault();
    showAbout();
  });
  
  footerHome.addEventListener('click', (e) => {
    e.preventDefault();
    showHome();
  });
  
  footerCategories.addEventListener('click', (e) => {
    e.preventDefault();
    showCategoriesBrowse();
  });
  
  footerAbout.addEventListener('click', (e) => {
    e.preventDefault();
    showAbout();
  });
  
  // Back buttons
  backButton.addEventListener('click', showHome);
  backButtonCategory.addEventListener('click', () => {
    const yearMatch = editionTitle.textContent.match(/\d{4}/);
    if (yearMatch && EDITIONS[yearMatch[0]]) {
      openEdition(yearMatch[0]);
    } else {
      showCategoriesBrowse();
    }
  });
  backButtonCategories.addEventListener('click', showHome);
  backButtonArtist.addEventListener('click', () => {
    const yearMatch = editionTitle.textContent.match(/\d{4}/);
    if (yearMatch && EDITIONS[yearMatch[0]]) {
      openEdition(yearMatch[0]);
    } else {
      showHome();
    }
  });
  backButtonAbout.addEventListener('click', showHome);
  
  // Initialize
  showHome();
  
  // Test data loading
  console.log('Daegon Awards initialized.');
});
</script>
</body>
</html>

